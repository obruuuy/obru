<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SQL Interaktif - SMKN Kasomalang</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #f4f6f8;
      color: #333;
      margin: 0;
      padding: 20px;
    }
    h1, h2, h3 {
      text-align: center;
    }
    h1 { color: #0077cc; }
    .card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      padding: 20px;
      margin: 20px auto;
      max-width: 900px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
    }
    th { background: #f0f0f0; }
    textarea {
      width: 100%;
      height: 60px;
      font-family: monospace;
      border-radius: 8px;
      border: 1px solid #ccc;
      padding: 10px;
    }
    button {
      background: #007bff;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 8px;
    }
    button:hover { background: #0056b3; }
    input[type="text"] {
      width: 250px;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-top: 5px;
    }
    .feedback {
      margin-top: 8px;
      font-weight: bold;
    }
    .benar { color: green; }
    .salah { color: red; }
    #score {
      font-size: 22px;
      font-weight: bold;
      text-align: center;
      color: #007700;
      margin-top: 20px;
    }
    footer {
      text-align: center;
      margin-top: 40px;
      font-size: 14px;
      color: #555;
    }
  </style>
</head>
<body>

  <h1>üß† SQL </h1>
  <h3>SMKN Kasomalang</h3>
  <p style="text-align:center;"><b>Guru Pengampu:</b> Dani Setiawan</p>

  <!-- INPUT NAMA SISWA -->
  <div class="card" style="text-align:center;">
    <h2>üë§ Identitas Siswa</h2>
    <label for="namaSiswa"><b>Nama Siswa:</b></label><br>
    <input type="text" id="namaSiswa" placeholder="Masukkan nama lengkap..." required>
  </div>

  <!-- MATERI PEMBELAJARAN -->
  <div class="card">
    <h2>üìò Materi: Dasar SQL (Structured Query Language)</h2>
    <p><b>SQL</b> digunakan untuk mengelola data dalam basis data. Beberapa perintah utama yang harus dikuasai:</p>
    <ul>
      <li><b>SELECT</b> ‚Üí Menampilkan data dari tabel.</li>
      <li><b>INSERT INTO</b> ‚Üí Menambahkan data baru ke tabel.</li>
      <li><b>UPDATE</b> ‚Üí Mengubah data yang sudah ada.</li>
      <li><b>DELETE</b> ‚Üí Menghapus data dari tabel.</li>
      <li><b>ORDER BY</b> ‚Üí Mengurutkan hasil berdasarkan kolom tertentu.</li>
      <li><b>WHERE</b> ‚Üí Menentukan kondisi/filter data.</li>
      <li><b>COUNT()</b> ‚Üí Menghitung jumlah baris data.</li>
    </ul>
  </div>

  <!-- STRUKTUR TABEL -->
  <div class="card">
    <h2>üìä Struktur Tabel <code>siswa</code></h2>
    <table>
      <tr><th>Kolom</th><th>Tipe Data</th><th>Keterangan</th></tr>
      <tr><td>nis</td><td>INT</td><td>Nomor Induk Siswa (Primary Key)</td></tr>
      <tr><td>nama</td><td>VARCHAR(50)</td><td>Nama lengkap siswa</td></tr>
      <tr><td>jurusan</td><td>VARCHAR(30)</td><td>Program keahlian siswa</td></tr>
      <tr><td>kelas</td><td>VARCHAR(10)</td><td>Kelas siswa</td></tr>
      <tr><td>nilai</td><td>INT</td><td>Nilai rata-rata akhir</td></tr>
    </table>
  </div>

  <!-- KUIS -->
  <div id="quiz-container"></div>
  <div id="score"></div>

  <script>
    const quizData = [
      { soal: "1Ô∏è‚É£ Tampilkan semua data dari tabel siswa.", jawaban: "select * from siswa;" },
      { soal: "2Ô∏è‚É£ Tampilkan kolom nama dan jurusan dari tabel siswa.", jawaban: "select nama, jurusan from siswa;" },
      { soal: "3Ô∏è‚É£ Tambahkan data siswa baru (nis=206, nama='Fajar', jurusan='RPL', kelas='XII-RPL2', nilai=90).", jawaban: "insert into siswa (nis, nama, jurusan, kelas, nilai) values (206, 'fajar', 'rpl', 'xii-rpl2', 90);" },
      { soal: "4Ô∏è‚É£ Ubah nilai siswa dengan NIS 205 menjadi 82.", jawaban: "update siswa set nilai = 82 where nis = 205;" },
      { soal: "5Ô∏è‚É£ Hapus data siswa dengan NIS 202.", jawaban: "delete from siswa where nis = 202;" },
      { soal: "6Ô∏è‚É£ Tampilkan siswa dengan jurusan RPL.", jawaban: "select * from siswa where jurusan = 'rpl';" },
      { soal: "7Ô∏è‚É£ Tampilkan siswa yang nilai-nya di atas 85.", jawaban: "select * from siswa where nilai > 85;" },
      { soal: "8Ô∏è‚É£ Hitung jumlah seluruh siswa di tabel siswa.", jawaban: "select count(*) from siswa;" },
      { soal: "9Ô∏è‚É£ Tampilkan siswa dengan nilai tertinggi.", jawaban: "select * from siswa order by nilai desc limit 1;" },
      { soal: "üîü Tampilkan nama siswa dan nilai mereka, urut dari yang tertinggi ke terendah.", jawaban: "select nama, nilai from siswa order by nilai desc;" }
    ];

    const quizContainer = document.getElementById("quiz-container");
    let skor = 0;
    let totalDijawab = 0;

    // tampilkan soal
    quizData.forEach((item, index) => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <p><b>${item.soal}</b></p>
        <!-- üîë Kunci Jawaban:
             ${item.jawaban}
        -->
        <textarea id="jawaban${index}" placeholder="Tulis perintah SQL di sini..."></textarea>
        <br>
        <button id="btn${index}" onclick="cekJawaban(${index})">Periksa Jawaban</button>
        <div id="feedback${index}" class="feedback"></div>
      `;
      quizContainer.appendChild(card);
    });

    function normalize(sql) {
      return sql.replace(/\s+/g, ' ')
                .trim()
                .toLowerCase()
                .replace(/'/g, "'");
    }

    function cekJawaban(index) {
      const textarea = document.getElementById(`jawaban${index}`);
      const button = document.getElementById(`btn${index}`);
      const feedback = document.getElementById(`feedback${index}`);
      const userAnswer = normalize(textarea.value);
      const correctAnswer = normalize(quizData[index].jawaban);

      if (!userAnswer) {
        alert("Isi dulu jawabanmu sebelum diperiksa!");
        return;
      }

      totalDijawab++;
      textarea.disabled = true;
      button.disabled = true;

      if (userAnswer === correctAnswer) {
        skor++;
        feedback.innerHTML = "‚úÖ Benar!";
        feedback.className = "feedback benar";
      } else {
        feedback.innerHTML = "‚ùå Salah.";
        feedback.className = "feedback salah";
      }

      if (totalDijawab === quizData.length) {
        tampilkanNilaiAkhir();
      }
    }

    function tampilkanNilaiAkhir() {
      const nama = document.getElementById("namaSiswa").value.trim();
      if (!nama) {
        alert("Masukkan nama siswa terlebih dahulu sebelum mulai kuis!");
        return;
      }

      const nilaiAkhir = (skor / quizData.length) * 100;
      document.getElementById("score").innerHTML = `
        üèÅ <br><b>Nama Siswa:</b> ${nama}<br>
        <b>Nilai Akhir:</b> ${skor}/10 (${nilaiAkhir.toFixed(0)}%)
      `;
    }
  </script>

  <footer>
    <p>üìò Disusun oleh <b>Dani Setiawan</b>-SMKN Kasomalang</p>
  </footer>

</body>
</html>
